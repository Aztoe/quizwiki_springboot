<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
  <script src="https://cdn.tiny.cloud/1/m9c7gqyopx0jsirhd6c5ayonoesqeg1dxxs3swtoi22qmkvy/tinymce/6/tinymce.min.js" referrerpolicy="origin"></script>
	<script src="https://cdn.tiny.cloud/1/m9c7gqyopx0jsirhd6c5ayonoesqeg1dxxs3swtoi22qmkvy/tinymce/6/langs/ko_KR.js" ></script>
	<script th:src="@{js/qboard/ko_KR.js}"></script>
	 <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
<div class="container mt-3">
  <h2>Dropdown Example</h2>
  <p>The <strong>toggle</strong> method toggles the dropdown.</p>
  <div class="dropdown">
    <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
      Dropdown button
    </button>
    <div class="dropdown-menu">
      <a class="dropdown-item" href="#">Link 1</a>
      <a class="dropdown-item" href="#">Link 2</a>
      <a class="dropdown-item" href="#">Link 3</a>
    </div>
  </div>
  <p><strong>Note:</strong> The data-toggle="dropdown" attribute is required regardless of whether you call the dropdown() method.</p>
</div>
 <textarea style="max-height: 200px; max-width: 200px;" placeholder="질문을 작성해보세요">
	  </textarea>
  <script>
	    tinymce.init({
	      selector: 'textarea',
	      language: 'ko',
	      menubar: false,	
	      mode : "textareas",
	      plugins: 'link lists media image ',
	      toolbar: 'alignleft aligncenter alignright alignjustify | bold italic |formatselect | bullist numlist | outdent indent | link image ',
	      tinycomments_mode: 'embedded',
	      tinycomments_author: 'Author name',
	      mergetags_list: [
	        { value: 'First.Name', title: 'First Name' },
	        { value: 'Email', title: 'Email' },
	      ],
	      images_upload_handler: function (blobInfo, success, failure) {
	          var xhr, formData;
	      
	          xhr = new XMLHttpRequest();
	          xhr.withCredentials = false;
	          xhr.open('POST', 'http://localhost:8080/upload/image');
	
	          xhr.onload = function () {
	              var json;
	
	              if (xhr.status != 200) {
	                  failure('HTTP Error: ' + xhr.status);
	                  return;
	              }
	
	              json = xhr.responseText;
	              success(json);
	          };
	
	          formData = new FormData();
	          formData.append('file', blobInfo.blob(), blobInfo.filename());
	
	          xhr.send(formData);
	      },
	      
	      /* enable title field in the Image dialog*/
	      image_title: true,
	    
	      /* enable automatic uploads of images represented by blob or data URIs*/
	      automatic_uploads: true,
	                            
	      /*Here we add custom filepicker only to Image dialog*/
	      file_picker_types: 'image',
	    
	      /* and here's our custom image picker*/
	      file_picker_callback: function (cb, value, meta) {
	          var input = document.createElement('input');
	          input.setAttribute('type', 'file');
	          input.setAttribute('accept', 'image/*');
	  
	          input.onchange = function () {
	              var file = this.files[0];                    
	              var reader = new FileReader();
	              
	              reader.onload = function () {
	                  /*
	                  Note: Now we need to register the blob in TinyMCEs image blob
	                  registry. In the next release this part hopefully won't be
	                  necessary, as we are looking to handle it internally.
	                  */
	                  var id = 'blobid' + (new Date()).getTime();
	                  var blobCache =  tinymce.activeEditor.editorUpload.blobCache;
	                  var base64 = reader.result.split(',')[1];
	                  
	                  var blobInfo = blobCache.create(id, file, base64);                                    
	                  blobCache.add(blobInfo);
	  
	                  /* call the callback and populate the Title field with the file name */
	                  cb(blobInfo.blobUri(), { title: file.name });
	              };
	        
	              reader.readAsDataURL(file);
	          };
	  
	          input.click();
	      }     
	    });
  </script>
</body>
</html>